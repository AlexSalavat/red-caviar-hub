@tailwind base;
@tailwind components;
@tailwind utilities;

/* ───────── TOKENS (DARK) ───────── */
:root{
  --bg:#0B1220;          /* фон страницы */
  --card:#0E1624;        /* подложка карточек (стекло) */
  --text:#E6EDF7;
  --muted:#9AA8BF;

  --neon1:#4FD1FF;       /* голубой неон */
  --neon2:#6AA6FF;       /* сине-фиолетовый неон */

  --verify:#22C55E;      /* зелёный для "Проверено" */
}

/* ───────── BASE ───────── */
@layer base{
  html,body,#root{ height:100%; }
  html{ scroll-behavior:smooth; }
  body{
    color: var(--text);
    background:
      radial-gradient(1200px 600px at 50% -220px, #152139 0%, var(--bg) 60%)
      , var(--bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  ::selection{ background: color-mix(in oklab, var(--neon1) 25%, white); color:#0a0f1a; }

  /* Тонкий скроллбар */
  *::-webkit-scrollbar{ width:10px; height:10px; }
  *::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.12); border-radius:999px; }
  *::-webkit-scrollbar-track{ background: transparent; }

  h1,h2,h3{ @apply font-semibold tracking-tight; color: var(--text); }
  h1{ @apply text-2xl; } h2{ @apply text-xl; } h3{ @apply text-lg; }
  p,small{ color: var(--muted); }
}

/* ───────── COMPONENTS ───────── */
@layer components{
  .container-safe{ @apply max-w-7xl mx-auto px-3 md:px-6; }

  /* Стеклянная карточка + неоновый контур + спотлайт */
  .glass{
    background: color-mix(in oklab, var(--card) 65%, transparent);
    @apply backdrop-blur-xl rounded-3xl border border-white/10;
  }
  .neon{ position: relative; }
  .neon::before{
    content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
    background: linear-gradient(135deg, var(--neon1), var(--neon2));
    background-size: 200% 200%;
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none;
    animation: neonFlow 8s linear infinite;
  }
  .spot{ position:relative; }
  .spot::after{
    content:""; position:absolute; left:10%; right:10%; bottom:-18px; height:26px;
    filter: blur(20px); opacity:.9;
    background: radial-gradient(60% 100% at 50% 50%, color-mix(in oklab, var(--neon1) 55%, transparent), transparent 70%);
    z-index:-1;
  }

  /* Кнопки */
  .btn{ @apply inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-xl transition active:translate-y-px; }
  .btn-solid{ background:#0f172a; color:#fff; border:1px solid rgba(255,255,255,.12); }
  .btn-solid:hover{ background:#111827; box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset, 0 10px 30px rgba(79,209,255,.08); }
  .btn-ghost{ color:var(--text); border:1px solid rgba(255,255,255,.12); background:transparent; }
  .btn-ghost:hover{ background:rgba(255,255,255,.05); box-shadow: 0 10px 24px rgba(79,209,255,.06); }
  .btn-muted{ color:var(--muted); border:1px solid rgba(255,255,255,.1); background:transparent; }
  .btn-muted:hover{ color:var(--text); background:rgba(255,255,255,.06); }

  /* Пилюли / бейджи */
  .pill{ @apply inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[12px] font-medium; }
  .pill-verified{ color: #86efac; background:#0a2a17; border:1px solid #14532d; }
  .pill-premium{ color:#fff; background: linear-gradient(90deg,#ff8ba7,#ffb86c,#7dd3fc); }

  /* Теги */
  .tag-dark{ @apply px-2 py-0.5 rounded-full text-[12px] border; border-color: rgba(255,255,255,.14); color:#E6EDF7; background:rgba(255,255,255,.06); }

  /* Разделитель */
  .divider{ @apply h-px my-4; background: rgba(255,255,255,.1); }

  /* Лёгкий подъем карточки и внутренний «жизнь» градиента */
  .hover-raise{ transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s; }
  .hover-raise:hover{ transform: translateY(-2px); box-shadow: 0 10px 30px rgba(79,209,255,.08); }

  /* Неоновая подсветка активного элемента */
  .active-glow{ filter: drop-shadow(0 0 10px color-mix(in oklab, var(--neon1) 60%, transparent)); }

  /* Шит (нижняя панель профиля) — плавная анимация */
  .sheet-enter { transform: translateY(100%); }
  .sheet-open  { transform: translateY(0); transition: transform .3s ease; }
}

/* ───────── UTILITIES ───────── */
@layer utilities{
  .bg-page-dark{
    background: radial-gradient(1200px 600px at 50% -220px, #152139 0%, var(--bg) 60%), var(--bg) !important;
  }
  .text-muted{ color: var(--muted); }
  .safe-bottom { padding-bottom: max(0.75rem, env(safe-area-inset-bottom)); }

  @media (prefers-reduced-motion: reduce){
    .neon::before{ animation: none !important; }
    .hover-raise, .sheet-open{ transition: none !important; }
  }
}

/* ───────── KEYFRAMES ───────── */
@keyframes neonFlow{
  0%{ background-position: 0% 50%; }
  50%{ background-position: 100% 50%; }
  100%{ background-position: 0% 50%; }
}
/* ───────── Mobile polish: dvh + safe-area + no-zoom ───────── */
@layer base {
  html, body, #root { height: 100%; }
  /* корректная высота экрана с учётом адресной строки iOS */
  @supports (height: 100dvh) {
    body { min-height: 100dvh; }
  }
  @supports not (height: 100dvh) {
    body { min-height: -webkit-fill-available; }
  }
  /* iOS не увеличивает зум, если font-size >= 16px */
  input, select, textarea { font-size: 16px; }
}

:root {
  --bottom-nav-h: 64px; /* высота панели снизу */
  --app-bottom-pad: calc(var(--bottom-nav-h) + env(safe-area-inset-bottom, 0px) + 16px);
}

/* ───────── Mobile Fix v2: устойчивые viewport-единицы, safe-area, no-zoom ───────── */
/* ───────── Mobile Fix v2: устойчивые viewport-единицы, safe-area, no-zoom ───────── */
@layer base {
  html, body, #root { height: 100%; }

  /* базовый фолбэк для старых iOS */
  body { min-height: -webkit-fill-available; }

  /* затем dvh, если поддерживается */
  @supports (height: 100dvh) {
    body { min-height: 100dvh; }
  }

  /* приоритетно svh (самое стабильное на мобилках) — перекроет dvh */
  @supports (height: 100svh) {
    body { min-height: 100svh; }
  }

  /* iOS не будет зумить инпуты */
  input, select, textarea { font-size: 16px; }
}

/* базовая профилактика переполнений на узких экранах */
* { min-width: 0; }
img { max-width: 100%; height: auto; display: block; }
/* Listings: мелкие полировки */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
